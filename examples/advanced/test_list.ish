(import list)

(defun testList ()
  (defun prt (msg val)
    (print msg)
    (print ": ")
    (println val))

  (defun prtList (msg lst)
    (var first true)
    (print msg)
    (print ": [")
    (list.list_foreach
     lst
     (lambda (n)
       (unless first
         (print ", "))
       (print (list.node_value n))
       (= first false)))
    (println "]"))

  (defun show (what lst)
    (println "----------")
    (println what)
    (prt "empty" (list.list_empty lst))
    (prt " size" (list.list_len lst))
    (prtList " list" lst))

  (var lst (list.make_list))
  (show "Make" lst)
  (list.list_append lst 1)
  (show "Append 1" lst)
  (list.list_append lst 2)
  (show "Append 2" lst)
  (list.list_append lst 3)
  (show "Append 3" lst)
  (list.list_prepend lst 0)
  (show "Prepend 0" lst)
  (list.list_append lst 4)
  (list.list_append lst 4)
  (list.list_append lst 5)
  (list.list_append lst 4)
  (show "Append 4 4 5 4" lst)
  (list.list_remove lst 4)
  (show "Remove 4" lst)
  (list.list_remove lst 3)
  (list.list_remove lst 5)
  (show "Remove 3 5" lst)
  (list.list_clear lst)
  (show "Clear" lst))

(testList)
